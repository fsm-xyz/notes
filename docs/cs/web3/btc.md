# BTC

## 基本面

1. 供应上限
比特币的总量被硬性限制在 2100 万枚。这是比特币最基本的规则之一，保证了它的稀缺性，类似于黄金。一旦达到这个上限，将不再有新的比特币被创造出来。

2. 区块奖励 (Block Reward)
新的比特币是通过“区块奖励”的形式产生的。矿工在成功验证并打包一个新的交易区块后，会获得一笔新发行的比特币作为奖励。这个奖励是区块补贴（coinbase transaction）。

比特币网络大约每 10 分钟产生一个新区块。

最初，每个区块的奖励是 50 个比特币。

3. 比特币减半 (Halving)
区块奖励并不是恒定不变的。根据比特币协议，每挖出 210,000 个区块，区块奖励就会减半。这个过程大约每 四年 发生一次。

2009 年：区块奖励为 50 BTC

2012 年：第一次减半，奖励变为 25 BTC

2016 年：第二次减半，奖励变为 12.5 BTC

2020 年：第三次减半，奖励变为 6.25 BTC

下一次减半预计在 2024 年，奖励将变为 3.125 BTC

正是因为这个减半机制，比特币的发行速度会随着时间逐渐降低，直到 2140 年左右，所有 2100 万枚比特币全部被挖出。

4. 挖矿难度调整 (Difficulty Adjustment)
为了确保新区块的产生时间始终保持在平均 10 分钟左右，比特币网络会动态调整挖矿的难度。

大约每 2016 个区块（也就是大约两周）会进行一次难度调整。

如果挖矿算力增加，新区块产生得更快，网络就会提高挖矿难度。

如果算力减少，区块产生得更慢，网络就会降低难度。

这个机制保证了比特币的发行节奏和总量限制不会因计算能力的变化而被打乱。

总结
比特币的生成规则可以概括为：在挖矿过程中，通过区块奖励定期产生新币，但奖励会周期性地减半，直至总量达到 2100 万枚。同时，挖矿难度会动态调整，确保新币的发行速率保持稳定。

这些规则共同构成了比特币的货币政策，使其成为一种可预测且具有通缩属性的数字资产。

## 比特币挖矿的生成规则

这套规则定义了新比特币如何被创造出来，也就是我们常说的“挖矿”。

a. 工作量证明（Proof of Work, PoW）
矿工通过解决一个数学难题来获得新区块的记账权，这个过程被称为工作量证明。

数学难题： 矿工需要反复运行哈希函数（SHA-256），不断尝试不同的随机数（nonce），直到找到一个符合特定条件的哈希值。这个条件通常是哈希值必须小于一个特定的目标值。

目标值： 这个目标值是由网络动态调整的，以确保平均每 10 分钟 产生一个新区块。

b. 区块奖励（Block Reward）
第一个找到符合条件哈希值的矿工，可以将最新的交易打包成一个新区块，并广播到全网。作为奖励，他们会得到两部分：

新生成的比特币（区块补贴）：这是新比特币的唯一来源。

交易手续费：区块中包含的所有交易支付的手续费。

c. 减半（Halving）
比特币的区块补贴不是恒定不变的，它会周期性地减半。

规则： 每挖出 210,000 个区块，新比特币的生成速度就会减半。这个过程大约每 4 年 发生一次。

目的： 确保比特币的总量上限为 2100 万枚，并使其具有通缩属性。

这两个层面的算法和规则共同构成了比特币的基石，一个保证安全，一个保证稀缺性，两者缺一不可。

## 概念

### 私钥

私钥（Private Key） 就像是你的银行账户密码。它是一串随机生成的、非常长的数字和字母，是你唯一拥有且必须保密的东西。私钥是产生公钥和比特币地址的“源头”。如果你丢失了私钥，就永远无法找回你的比特币。

私钥（Private Key） 是一个随机生成的、256位的数字。你可以把它想象成一个范围从1到$2^{256}$之间的任意一个整数。这个数字通常由一个加密安全伪随机数生成器（CSPRNG）生成

### 公钥

公钥（Public Key） 就像是你的银行卡号。它是从私钥通过一个不可逆的加密算法（椭圆曲线加密算法，ECDSA）推导出来的。公钥是用来接收比特币的。 任何人都可以拥有你的公钥，但无法通过公钥反向推算出你的私钥

公钥（Public Key） 是通过私钥使用**椭圆曲线数字签名算法（ECDSA）**生成的。

具体过程： 私钥作为输入，通过一个固定的椭圆曲线函数（比特币使用的是Secp256k1）进行计算，结果就是公钥。

特性： 这个过程是单向的。从私钥可以轻松计算出公钥，但从公钥反向推导出私钥在计算上是几乎不可能的

### 地址

就像是你的银行账户。它是由公钥经过一系列哈希（hash）运算得到的，通常是一串更短、更易于分享的数字和字母。比特币地址是你在进行交易时实际使用的，你把这个地址给别人，别人就可以向你转账

比特币地址（Address） 是通过公钥经过一系列哈希（hash）运算和编码得到的。

具体过程：

对公钥进行两次哈希运算：先用 SHA-256，再用 RIPEMD-160。

在哈希结果前加上版本号（例如，比特币主网的0x00）。

对整个结果进行编码，得到最终的地址。

特性： 这个过程同样是单向的，保证了你的公钥不会直接暴露，从而增加了安全性。

#### P2PKH

这是最原始、最常见的比特币地址类型，也是通常所说的“传统”地址

Pay-to-Public-Key-Hash, 比如`1BvBMSEYstWetqTFn5Au4m4GFg7xJaNVN2`

+ 以数字 1 开头
+ 长度通常在 26 到 34 个字符之间

这种地址是通过公钥哈希得到的。当一笔交易发生时，你需要提供与地址对应的公钥以及私钥签名来解锁比特币

#### P2SH

P2SH 地址是为了支持更复杂的交易脚本而引入的，最著名的应用是多重签名钱包（multi-sig）

Pay-to-Script-Hash, 比如`3J98t1WpEZ73CNmQviecrnyiWrnqRhWNLy`

+ 以数字 3 开头
+ 长度通常在 26 到 34 个字符之间

这种地址不是直接锁定到一个公钥哈希，而是锁定到一个脚本哈希。在花费比特币时，你需要提供满足该脚本要求的数据（例如，多重签名交易中，需要多个私钥的签名）。它将复杂的脚本细节隐藏在地址背后，使得交易看起来更简洁

#### Bech32 (SegWit)

这是最新的地址类型，与隔离见证（SegWit）技术相关。SegWit 是为了解决比特币扩容问题而推出的一个重要协议升级

比如`bc1qxy2kgdygjrsqtzq2n0yrf24dnalpf87l7yq2`

+ 以 bc1 开头
+ 由数字和除了 0, O, I, l 之外的字母组成，更容易手动输入和识别

这种地址的交易数据量更小，因此交易手续费更低

Bech32 地址使用的校验和（checksum）更强大，能更有效地防止因输入错误而导致的资金丢失
