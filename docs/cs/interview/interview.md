# 面试准备

## 操作系统

+ 进程，线程
+ 内存
+ 文件

## 网络

+ tcp/ip
+ https,http

## 容器

+ docker
+ k8s
+ istio

## 数据库

+ mysql
+ redis

## 消息队列

+ kafka

## 编程语言
## 架构

## 工作经历

16刚毕业在西安做web开发，使用php和nodejs进行业务开发，也写前端
17年来北京，去了小黄车，一开始做的是活动组，主要做的是活动抽奖服务, 红包服务。后来去了一个平台组，做一个平台，支持基于离线和实时事件对用户进行触达, 提供人群圈选，ab服务，活动策略，卡券兑换
18年去了映客，一直对14-15年兴起的直播行业很感兴趣，想了解下内部是怎么做直播的，一开始是在大厅组，负责app内容的数据组合，规则过滤，用户搜索 后来去了房间组，做房间内开发，负责开关播，直播连麦，房间事件等，再后来去做新合唱APP，陌生人聊天APP
20年去了伊对，做基础架构开发，负责mesh落地，编写框架，进行业务改造，实现日志和trace, metrics的监控落地
封装

建设网关，监控上云，迁移服务到k8s，事件中间件

## 问题

+ 大量conntrack导致网络丢包，阿里云主机配置修改
+ golang容器的cpu设置
+ TIME-WAIT过多, slb的短连接，nginx配置不用keepalive
+ 阿里云terway支持pod ip进行slb注册
+ 第三方支持双栈协议，k8s不支持双栈，导致部分请求解析到ipv6的请求失败
+ coredns每次重启，某个业务大量报错，业务代码每次都做dns请求导致
+ slb 7转4
+ metric的数据标签丢失，配置prometheus的时候限制了标签数量
+ envoy的插件  修改body大小，日志打印
+ k8s服务503  由于服务退出信号和pod删除信号同时发送，导致流量继续请求服务  503
+ 时区问题，挂在本地配置
+ coredns配置请求过大，导致出问题，增加参数
+ istio-proxy的网络规则，全部转到lo网卡，导致无法访问(0.0.0.0:80, 127.0.0.1:80, podid:80)
+ istio-proxy 流量嗅探，grpc， http2缺少header: `：authority`导致流量被拒绝
+ k8s的双栈协议, dns回来ipv6但是k8s不支持
+ 不在于技术的难度，而在于快速推广，迅速接受


## 数据结构和算法

## 其他

### 限流

+ 令牌桶
+ 漏桶
+ 滑动窗口

### 分布式锁

+ redis
+ zk, etcd, consol

### 负载均衡

服务端, 客户端负载均衡

+ 一致性哈希
+ 最小连接数
+ 轮询(加权)
+ 随机(加权)

### CAP

CAP与分布式事务

CA/AP

### 高并发

缓存策略

穿透/击穿/雪崩解决方案：布隆过滤器防穿透、热点Key永不过期、随机过期时间

一致性保障：双写策略（先DB后缓存）、监听Binlog异步更新
        有写操作的时候进行上锁，不允许别的节点进行设置缓存

容灾设计

服务熔断（Hystrix/Sentinel）、多机房部署、灰度发布
